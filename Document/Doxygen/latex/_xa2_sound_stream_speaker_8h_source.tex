\hypertarget{_xa2_sound_stream_speaker_8h_source}{}\doxysection{Xa2\+Sound\+Stream\+Speaker.\+h}
\label{_xa2_sound_stream_speaker_8h_source}\index{C:/Users/eugen/Desktop/Programming/EugeneLib/Source/Sound/Xaudio2/Xa2SoundStreamSpeaker.h@{C:/Users/eugen/Desktop/Programming/EugeneLib/Source/Sound/Xaudio2/Xa2SoundStreamSpeaker.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include "{}../../../Include/Sound/SoundStreamSpeaker.h"{}}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <filesystem>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <thread>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <atomic>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <semaphore>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <xaudio2.h>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 }
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{keyword}{namespace }Eugene}
\DoxyCodeLine{14 \{}
\DoxyCodeLine{15     }
\DoxyCodeLine{16     \textcolor{keyword}{class }\mbox{\hyperlink{class_eugene_1_1_xa2_sound_stream_speaker}{Xa2SoundStreamSpeaker}} :}
\DoxyCodeLine{17         \textcolor{keyword}{public} \mbox{\hyperlink{class_eugene_1_1_sound_stream_speaker}{SoundStreamSpeaker}}}
\DoxyCodeLine{18     \{}
\DoxyCodeLine{19     \textcolor{keyword}{public}:}
\DoxyCodeLine{20         \mbox{\hyperlink{class_eugene_1_1_xa2_sound_stream_speaker}{Xa2SoundStreamSpeaker}}(IXAudio2* device,\textcolor{keyword}{const} std::filesystem::path\& path, std::uint16\_t outChannel);}
\DoxyCodeLine{21         \mbox{\hyperlink{class_eugene_1_1_xa2_sound_stream_speaker}{\string~Xa2SoundStreamSpeaker}}();}
\DoxyCodeLine{22     \textcolor{keyword}{private}:}
\DoxyCodeLine{23         \textcolor{keyword}{class }CollBack : \textcolor{keyword}{public} IXAudio2VoiceCallback}
\DoxyCodeLine{24         \{}
\DoxyCodeLine{25         \textcolor{keyword}{public}:}
\DoxyCodeLine{26             CollBack(\mbox{\hyperlink{class_eugene_1_1_xa2_sound_stream_speaker}{Xa2SoundStreamSpeaker}}\& speaker);}
\DoxyCodeLine{27             \textcolor{keywordtype}{void} OnBufferEnd(\textcolor{keywordtype}{void}* pBufferContext) \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{28             \textcolor{keywordtype}{void} OnBufferStart(\textcolor{keywordtype}{void}* pBufferContext) \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{29             \textcolor{keywordtype}{void} OnLoopEnd(\textcolor{keywordtype}{void}* pBufferContext) \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{30             \textcolor{keywordtype}{void} OnStreamEnd() \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{31             \textcolor{keywordtype}{void} OnVoiceError(\textcolor{keywordtype}{void}* pBufferContext,HRESULT Error) \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{32             \textcolor{keywordtype}{void} OnVoiceProcessingPassEnd() \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{33             \textcolor{keywordtype}{void} OnVoiceProcessingPassStart(std::uint32\_t BytesRequired) \textcolor{keyword}{noexcept} \textcolor{keyword}{final};}
\DoxyCodeLine{34         \textcolor{keyword}{private}:}
\DoxyCodeLine{35             \mbox{\hyperlink{class_eugene_1_1_xa2_sound_stream_speaker}{Xa2SoundStreamSpeaker}}\& speaker\_;}
\DoxyCodeLine{36         \};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38         \textcolor{keywordtype}{void} Play(\textcolor{keywordtype}{void}) \textcolor{keyword}{final};}
\DoxyCodeLine{39         \textcolor{keywordtype}{void} Stop(\textcolor{keywordtype}{void});}
\DoxyCodeLine{40         \textcolor{keywordtype}{bool} IsEnd(\textcolor{keywordtype}{void}) \textcolor{keyword}{const} \textcolor{keyword}{final};}
\DoxyCodeLine{41         \textcolor{keywordtype}{void} SetPitchRate(\textcolor{keywordtype}{float} rate) \textcolor{keyword}{final};}
\DoxyCodeLine{42         \textcolor{keywordtype}{void} SetOutput(\mbox{\hyperlink{class_eugene_1_1_sound_control}{SoundControl}}\& control) \textcolor{keyword}{final};}
\DoxyCodeLine{43         \textcolor{keywordtype}{void} SetVolume(\textcolor{keywordtype}{float} volume) \textcolor{keyword}{final};}
\DoxyCodeLine{44         \textcolor{keywordtype}{void} SetPan(std::span<float> volumes) \textcolor{keyword}{final};}
\DoxyCodeLine{45 }
\DoxyCodeLine{46         \textcolor{keywordtype}{void} Worker(\textcolor{keywordtype}{void});}
\DoxyCodeLine{47 }
\DoxyCodeLine{51         IXAudio2SourceVoice* source\_;}
\DoxyCodeLine{52 }
\DoxyCodeLine{56         std::unique\_ptr<CollBack> collback\_;}
\DoxyCodeLine{57         }
\DoxyCodeLine{61         std::thread streamThread\_;}
\DoxyCodeLine{62 }
\DoxyCodeLine{66         std::atomic\_bool isRun\_;}
\DoxyCodeLine{67 }
\DoxyCodeLine{71         std::atomic\_bool isPlay\_;}
\DoxyCodeLine{72 }
\DoxyCodeLine{76         std::binary\_semaphore semaphore\_\{0\};}
\DoxyCodeLine{77 }
\DoxyCodeLine{81         std::streampos starPos\_;}
\DoxyCodeLine{82 }
\DoxyCodeLine{86         std::uint32\_t dataSize\_;}
\DoxyCodeLine{87 }
\DoxyCodeLine{91         std::uint32\_t nowSize\_;}
\DoxyCodeLine{92 }
\DoxyCodeLine{96         std::unique\_ptr<XAUDIO2\_BUFFER> buffer\_;}
\DoxyCodeLine{97 }
\DoxyCodeLine{101         std::vector<std::uint8\_t> bufferData\_;}
\DoxyCodeLine{102 }
\DoxyCodeLine{106         std::vector<std::uint8\_t> streamData\_;}
\DoxyCodeLine{107 }
\DoxyCodeLine{111         std::uint32\_t streamSize\_;}
\DoxyCodeLine{112 }
\DoxyCodeLine{116         std::uint32\_t bytesPerSec;}
\DoxyCodeLine{117 }
\DoxyCodeLine{118         \textcolor{keyword}{friend} \textcolor{keyword}{class }CollBack;}
\DoxyCodeLine{119     \};}
\DoxyCodeLine{120 \}}

\end{DoxyCode}
